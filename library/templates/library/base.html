<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}Ù…ÙƒØªØ¨Ø© Ø¢Ù„ÙŠØ³Ø§Ø± Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠØ©{% endblock %}</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.rtl.min.css" rel="stylesheet">
    {% load static %}
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&display=swap');
        
        body {
            font-family: 'Cairo', sans-serif;
            background: linear-gradient(to bottom right, #fdf6ec, #f9f9f9);
            margin: 0;
            padding: 0;
            padding-top: 100px; 
        }

        /* Ø§Ù„Ù‡ÙŠØ¯Ø± Ø§Ù„Ø«Ø§Ø¨Øª */
        .main-header {
            background-color: #fff8dc;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            position: fixed;
            top: 0;
            width: 100%;
            z-index: 1000;
            padding: 15px 0;
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 40px 0 20px; 
            position: relative;
            max-width: 1400px;
            margin: 0 auto;
        }

        /* Ø§Ù„Ø¬Ø²Ø¡ Ø§Ù„Ø£ÙŠØ³Ø±: Ø§Ù„Ø¨Ø­Ø« */
        .header-left {
            position: absolute;
            left: 25px; 
            top: 50%;
            transform: translateY(-50%);
        }

        /* Ø§Ù„Ø¬Ø²Ø¡ Ø§Ù„Ø£ÙˆØ³Ø·: Ø§Ù„Ø´Ø¹Ø§Ø± ÙˆØ§Ù„Ø±ÙˆØ§Ø¨Ø· */
        .header-center {
            display: flex;
            align-items: center;
            gap: 40px; 
            margin: 0 auto;
        }

        /* Ø§Ù„Ø¬Ø²Ø¡ Ø§Ù„Ø£ÙŠÙ…Ù†: ÙØ§Ø±Øº */
        .header-right {
            width: 180px; 
        }

        .logo-section {
            display: flex;
            align-items: center;
        }

        .logo {
            width: 65px; 
            height: 65px;
            border-radius: 50%; 
            object-fit: cover;
            margin-left: 12px;
            border: 3px solid #ff6f61; 
            box-shadow: 0 2px 8px rgba(0,0,0,0.2);
        }

        .logo-section h4 {
            font-size: 1.4rem; 
            margin: 0;
        }

        .nav-links {
            display: flex;
            gap: 20px;
        }

        .nav-links a {
            text-decoration: none;
            color: #333;
            font-weight: 600;
            padding: 10px 20px; 
            border-radius: 25px;
            transition: all 0.3s ease;
            background-color: #f8f9fa;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            font-size: 0.95rem;
        }

        .nav-links a:hover {
            background-color: #ff6f61;
            color: white;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }

        
        .search-container {
            width: 220px; 
        }

        .search-input {
            border-radius: 20px; 
            padding: 8px 15px;
            padding-right: 40px; 
            border: 2px solid #ddd;
            transition: all 0.3s ease;
            background-color: white;
            font-family: 'Cairo', sans-serif;
            width: 100%;
            text-align: right;
            font-size: 0.9rem;
        }

        .search-input:focus {
            border-color: #ff6f61;
            box-shadow: 0 0 0 3px rgba(255, 111, 97, 0.2);
            outline: none;
            width: 240px; 
        }

        .search-input::placeholder {
            color: #888;
            font-size: 0.85rem;
        }

        .search-wrapper {
            position: relative;
        }

        .search-icon {
            position: absolute;
            left: 12px; 
            top: 50%;
            transform: translateY(-50%);
            color: #666;
            font-size: 16px; 
        }

        /* Ø§Ù„ÙƒØ§Ø±Ø¯Ø§Øª */
        .card {
            background: linear-gradient(to bottom right, #fff3e0, #ffe0b2);
            border: none;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            border-radius: 12px;
        }

        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 16px rgba(0,0,0,0.2);
        }

        /* Ø£Ø²Ø±Ø§Ø± Ø§Ù„ØªØµÙØ­ ÙˆØ§Ù„Ù‚Ø±Ø§Ø¡Ø© */
        .btn-primary {
            background: linear-gradient(135deg, #ff9a3d, #ff6f61);
            border: none;
            border-radius: 25px;
            padding: 10px 25px;
            font-weight: 600;
            color: white;
            transition: all 0.3s ease;
            box-shadow: 0 4px 8px rgba(255, 111, 97, 0.3);
        }

        .btn-primary:hover {
            background: linear-gradient(135deg, #ff8a2d, #e55a50);
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(255, 111, 97, 0.4);
            color: white;
        }

        .btn-success {
            background: linear-gradient(135deg, #28a745, #218838);
            border: none;
            border-radius: 25px;
            padding: 10px 25px;
            font-weight: 600;
            transition: all 0.3s ease;
            box-shadow: 0 4px 8px rgba(40, 167, 69, 0.3);
        }

        .btn-success:hover {
            background: linear-gradient(135deg, #218838, #1e7e34);
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(40, 167, 69, 0.4);
        }

        /* Ø§Ù„ÙÙˆØªØ± */
        footer {
            background-color: #ff6f61;
            color: white;
            padding: 30px 20px;
            text-align: center;
            margin-top: 50px;
        }

        .footer-links a {
            color: #fffacd;
            text-decoration: none;
            margin: 0 10px;
        }

        .footer-links a:hover {
            text-decoration: underline;
        }

        /* ØªÙ„Ù…ÙŠØ­Ø§Øª */
        .secret-hint {
            position: fixed;
            bottom: 20px;
            left: 20px;
            background: rgba(0,0,0,0.85);
            color: white;
            padding: 12px 18px;
            border-radius: 10px;
            font-size: 13px;
            display: none;
            z-index: 10000;
            max-width: 300px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.3);
        }

        .secret-hint.show {
            display: block;
            animation: fadeIn 0.3s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        
        @media (max-width: 1200px) {
            .header-content {
                padding: 0 30px 0 15px;
            }
            
            .header-left {
                left: 20px;
            }
            
            .search-container {
                width: 200px;
            }
            
            .search-input:focus {
                width: 220px;
            }
        }
        
        @media (max-width: 992px) {
            .header-content {
                flex-direction: column;
                gap: 15px;
                padding: 0 15px;
            }
            
            .header-left, .header-center, .header-right {
                position: static;
                transform: none;
                width: 100%;
                text-align: center;
                margin: 5px 0;
            }
            
            .header-left {
                order: 1; 
            }
            
            .header-center {
                order: 2; 
                flex-direction: column;
                gap: 15px;
            }
            
            .header-right {
                order: 3; 
                display: none; 
            }
            
            .search-container {
                width: 100%;
                max-width: 350px;
                margin: 0 auto;
            }
            
            .search-input {
                width: 100% !important;
            }
            
            .nav-links {
                justify-content: center;
                flex-wrap: wrap;
            }
        }
        
        @media (max-width: 576px) {
            .logo-section {
                flex-direction: column;
                gap: 10px;
            }
            
            .logo {
                margin-left: 0;
            }
            
            .search-container {
                max-width: 280px;
            }
            
            .nav-links a {
                padding: 8px 15px;
                font-size: 0.85rem;
            }
        }
    </style>
    


</head>
<body>
    <!-- Ø§Ù„Ù‡ÙŠØ¯Ø± Ø§Ù„Ø«Ø§Ø¨Øª -->
    <header class="main-header">
        <div class="header-content">
            
            <div class="header-left">
                <div class="search-container">
                    <form action="{% url 'search' %}" method="get" id="searchForm">
                        <div class="search-wrapper">
                            <input type="text" 
                                   name="q" 
                                   id="searchInput"
                                   class="form-control search-input" 
                                   placeholder="Ø§Ø¨Ø­Ø« Ø¹Ù† ÙƒØªØ§Ø¨ Ø£Ùˆ Ù…Ø¤Ù„Ù..."
                                   autocomplete="off">
                            <div class="search-icon">ğŸ”</div>
                        </div>
                    </form>
                </div>
            </div>
            
            
            <div class="header-center">
                 <div class="logo-section">
                    <img src="{% static 'library/images/Alisar_logo.png' %}" alt="Ù„ÙˆØºÙˆ Ù…ÙƒØªØ¨Ø© Ø¢Ù„ÙŠØ³Ø§Ø±" class="logo">
                    <h4 class="mb-0 me-3" style="font-weight: 700; color: #333;">Ù…ÙƒØªØ¨Ø© Ø¢Ù„ÙŠØ³Ø§Ø± Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠØ©</h4>
                </div>
               

                <!-- Ø§Ù„Ø±ÙˆØ§Ø¨Ø· -->
                <nav class="nav-links">
                    <a href="{% url 'index' %}">ğŸ  Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a>
                </nav>
            </div>
            
            <!-- Ø§Ù„Ø¬Ø²Ø¡ Ø§Ù„Ø£ÙŠÙ…Ù†: ÙØ§Ø±Øº  -->
            <div class="header-right"></div>
</div>
        </div>
    </header>

    <!-- Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ -->
    <main>
        {% block content %}
        {% endblock %}
    </main>

    <!-- Ø§Ù„ÙÙˆØªØ± -->
    <footer>
        <div class="container">
            <h5>Ù…ÙƒØªØ¨Ø© Ø¢Ù„ÙŠØ³Ø§Ø± Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠØ©</h5>
            <p>Ù…Ù†ØµØ© Ù…Ø¹Ø±ÙÙŠØ© Ø´Ø§Ù…Ù„Ø© Ù„Ø¬Ù…ÙŠØ¹ Ø§Ø­ØªÙŠØ§Ø¬Ø§ØªÙƒ Ø§Ù„Ù‚Ø±Ø§Ø¦ÙŠØ©</p>
            <div class="footer-links">
                <a href="{% url 'index' %}">Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a> |
                <a href="mailto:almaarinia@gmail.com">ğŸ“§ Ø§Ù„ØªÙˆØ§ØµÙ„</a>
            </div>
            <p class="mt-3">ğŸ’– Ø´ÙƒØ±Ø§Ù‹ Ù„Ø²ÙŠØ§Ø±ØªÙƒ Ù…ÙƒØªØ¨Ø© Ø¢Ù„ÙŠØ³Ø§Ø±</p>
        </div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

    
    <script>
    document.addEventListener('DOMContentLoaded', function() {
        const searchInput = document.getElementById('searchInput');
        const searchForm = document.getElementById('searchForm');
        
        if (searchInput) {
            // Ø§Ø®ØªØµØ§Ø± Ctrl+F Ù„Ù„Ø¨Ø­Ø«
            document.addEventListener('keydown', function(e) {
                if (e.ctrlKey && e.key === 'f') {
                    e.preventDefault();
                    searchInput.focus();
                    searchInput.select();
                }
                
                // Esc Ù„Ù…Ø³Ø­ Ø§Ù„Ø¨Ø­Ø«
                if (e.key === 'Escape') {
                    searchInput.value = '';
                    searchInput.blur();
                }
            });
            
            
            searchInput.addEventListener('focus', function() {
                this.style.width = '240px';
            });
            
            searchInput.addEventListener('blur', function() {
                if (this.value === '') {
                    this.style.width = '220px';
                }
            });
            
            // Ø§Ù„Ø¨Ø­Ø« Ø¹Ù†Ø¯ Ø§Ù„Ø¶ØºØ· Ø¹Ù„Ù‰ Enter
            searchInput.addEventListener('keydown', function(e) {
                if (e.key === 'Enter' && this.value.trim() !== '') {
                    e.preventDefault();
                    searchForm.submit();
                }
            });
            
            
            let searchTimeout;
            searchInput.addEventListener('input', function() {
                clearTimeout(searchTimeout);
                
                // Ø¥Ø°Ø§ ÙƒØªØ¨ 3 Ø£Ø­Ø±Ù Ø£Ùˆ Ø£ÙƒØ«Ø±ØŒ ÙŠØ¨Ø­Ø« ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ Ø¨Ø¹Ø¯ 1.5 Ø«Ø§Ù†ÙŠØ©
                if (this.value.length >= 3) {
                    searchTimeout = setTimeout(() => {
                        searchForm.submit();
                    }, 1500);
                }
            });
        }
    });
    </script>


    <script type="text/javascript">
        window.$crisp = [];
        window.CRISP_WEBSITE_ID = "429525df-18d1-4c27-8038-11ad97f9cdef";

        // === Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ù„Ù…Ù†Ø¹ Ø·Ù„Ø¨ Ø§Ù„Ø¥ÙŠÙ…ÙŠÙ„ ===
        $crisp.push(["set", "session:data", [
            ["email_gate", "skipped"],
            ["should_collect_email", false]
        ]]);

        // === Ø¥Ø¹Ø¯Ø§Ø¯ Ø±Ø¯ÙˆØ¯ Ø°ÙƒÙŠØ© ===
        var libraryResponses = {
            "Ù…Ø±Ø­Ø¨Ø§": "Ø£Ù‡Ù„Ø§Ù‹ ÙˆØ³Ù‡Ù„Ø§Ù‹ Ø¨Ùƒ ÙÙŠ Ù…ÙƒØªØ¨Ø© Ø¢Ù„ÙŠØ³Ø§Ø±! ğŸ˜Š ÙƒÙŠÙ ÙŠÙ…ÙƒÙ†Ù†ÙŠ Ù…Ø³Ø§Ø¹Ø¯ØªÙƒØŸ",
            "Ø§Ù„Ø³Ù„Ø§Ù…": "ÙˆØ¹Ù„ÙŠÙƒÙ… Ø§Ù„Ø³Ù„Ø§Ù… ÙˆØ±Ø­Ù…Ø© Ø§Ù„Ù„Ù‡! Ø£Ù†Ø§ Ù…Ø³Ø§Ø¹Ø¯ Ù…ÙƒØªØ¨Ø© Ø¢Ù„ÙŠØ³Ø§Ø±.",
            "ÙƒØªØ§Ø¨": "ğŸ“š Ù„Ø¯ÙŠÙ†Ø§ Ø¢Ù„Ø§Ù Ø§Ù„ÙƒØªØ¨! Ù‡Ù„ ØªØ¨Ø­Ø« Ø¹Ù†:\n1. Ø±ÙˆØ§ÙŠØ§Øª Ø¹Ø±Ø¨ÙŠØ©\n2. Ø±ÙˆØ§ÙŠØ§Øª Ø¹Ø§Ù„Ù…ÙŠØ©\n3. ÙƒØªØ¨ Ø¹Ù„Ù…ÙŠØ©\n4. ÙƒØªØ¨ Ø£Ø¯Ø¨ÙŠØ©",
            "ÙƒØªØ¨": "ğŸ“– Ù…ÙƒØªØ¨ØªÙ†Ø§ ØªØ­ØªÙˆÙŠ Ø¹Ù„Ù‰:\nâ€¢ Ø±ÙˆØ§ÙŠØ§Øª Ø¹Ø±Ø¨ÙŠØ© ÙˆØ¹Ø§Ù„Ù…ÙŠØ©\nâ€¢ ÙƒØªØ¨ Ø¹Ù„Ù…ÙŠØ© ÙˆØ¯Ø±Ø§Ø³ÙŠØ©\nâ€¢ ÙƒØªØ¨ Ø£Ø¯Ø¨ÙŠØ© ÙˆØªØ§Ø±ÙŠØ®ÙŠØ©\nâ€¢ ÙƒØªØ¨ Ø¯ÙŠÙ†ÙŠØ©",
            "ÙŠÙØªØ­": "âœ… Ù†Ø¹Ù…! Ø§Ù„Ù…ÙƒØªØ¨Ø© Ù…ÙØªÙˆØ­Ø© Ø§Ù„Ø¢Ù†. ÙŠÙ…ÙƒÙ†Ùƒ ØªØµÙØ­ Ø§Ù„ÙƒØªØ¨ Ù…Ø¨Ø§Ø´Ø±Ø©.",
            "Ø´ÙƒØ±Ø§": "â¤ï¸ Ø§Ù„Ø¹ÙÙˆ! Ø³Ø¹Ø¯Ø§Ø¡ Ø¨Ø®Ø¯Ù…ØªÙƒ. Ù‡Ù„ Ù„Ø¯ÙŠÙƒ Ø£Ø³Ø¦Ù„Ø© Ø£Ø®Ø±Ù‰ØŸ",
            "Ù…ÙˆÙ‚Ø¹": "ğŸŒ Ù…ÙˆÙ‚Ø¹Ù†Ø§: https://alisar-library.onrender.com\nÙŠÙ…ÙƒÙ†Ùƒ ØªØµÙØ­ Ø¬Ù…ÙŠØ¹ Ø§Ù„ÙƒØªØ§Ø¨ Ù…Ù† Ù‡Ù†Ø§!"
        };

        // === Ø¹Ù†Ø¯ ÙØªØ­ Ø§Ù„Ø´Ø§Øª ===
        $crisp.push(["on", "chat:opened", function() {
            setTimeout(function() {
                $crisp.push(["do", "message:send", [
                    "text", 
                    "ğŸ“š Ø£Ù‡Ù„Ø§Ù‹! Ø£Ù†Ø§ Ù…Ø³Ø§Ø¹Ø¯ Ù…ÙƒØªØ¨Ø© Ø¢Ù„ÙŠØ³Ø§Ø± ğŸ¤–\n\nØ£Ø³Ø£Ù„Ù†ÙŠ Ø¹Ù†:\nâ€¢ Ø§Ù„ÙƒØªØ¨ ÙˆØ§Ù„Ø±ÙˆØ§ÙŠØ§Øª\nâ€¢ Ø§Ù„Ø¨Ø­Ø«\nâ€¢ Ø£Ù‚Ø³Ø§Ù… Ø§Ù„Ù…ÙƒØªØ¨Ø©\nâ€¢ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ÙƒØªØ¨ "
                ]]);
            }, 1000);
        }]);

        // === Ø¹Ù†Ø¯ Ø¥Ø±Ø³Ø§Ù„ Ø±Ø³Ø§Ù„Ø© Ù…Ù† Ø§Ù„Ø²Ø§Ø¦Ø± ===
        $crisp.push(["on", "message:send", function(message) {
            var userMessage = message.content.text.toLowerCase();
            var foundResponse = false;
            
            // Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ø±Ø¯ Ù…Ù†Ø§Ø³Ø¨
            for (var key in libraryResponses) {
                if (userMessage.includes(key)) {
                    setTimeout(function() {
                        $crisp.push(["do", "message:send", ["text", libraryResponses[key]]]);
                    }, 1500);
                    foundResponse = true;
                    break;
                }
            }
            
            // Ø¥Ø°Ø§ Ù…Ø§ ÙÙŠ Ø±Ø¯ Ù…Ø·Ø§Ø¨Ù‚
            if (!foundResponse) {
                setTimeout(function() {
                    $crisp.push(["do", "message:send", [
                        "text", 
                        "Ø´ÙƒØ±Ø§Ù‹ Ù„Ø³Ø¤Ø§Ù„Ùƒ! ğŸ¤–\nÙØ±ÙŠÙ‚ Ø§Ù„Ø¯Ø¹Ù… Ø³ÙŠØ±Ø¯ Ø¹Ù„ÙŠÙƒ Ù‚Ø±ÙŠØ¨Ø§Ù‹.\n\nÙŠÙ…ÙƒÙ†Ùƒ Ø£ÙŠØ¶Ø§Ù‹:\n1. ØªØµÙØ­ Ø§Ù„Ø£Ù‚Ø³Ø§Ù… ÙÙŠ Ø§Ù„Ø£Ø¹Ù„Ù‰\n2. Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø´Ø±ÙŠØ· Ø§Ù„Ø¨Ø­Ø«\n3. Ù…Ø±Ø§Ø¬Ø¹Ø© Ø§Ù„Ø£Ø³Ø¦Ù„Ø© Ø§Ù„Ø´Ø§Ø¦Ø¹Ø©"
                    ]]);
                }, 2000);
            }
        }]);

        // === ØªØ­Ù…ÙŠÙ„ Crisp ===
        (function() {
            var d = document;
            var s = d.createElement("script");
            s.src = "https://client.crisp.chat/l.js";
            s.async = 1;
            d.getElementsByTagName("head")[0].appendChild(s);
            
            console.log("ğŸ“š Ù…ÙƒØªØ¨Ø© Ø¢Ù„ÙŠØ³Ø§Ø± Chatbot loaded!");
        })();
    </script>

    
    <style>
            .crisp-client .crisp-button {
                background-color: #2c3e50 !important;
                color: white !important;
            }
            .crisp-chatbox {
                font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif !important;
            }
    </style>


</body>
</html>