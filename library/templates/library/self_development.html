{% extends 'library/base.html' %}

{% block title %}ØªØ·ÙˆÙŠØ± Ø§Ù„Ø°Ø§Øª - Ù…ÙƒØªØ¨Ø© Ø£Ù„ÙŠØ³Ø§Ø±{% endblock %}

{% block content %}
<div class="hero text-center py-4">
    <h2 class="text-primary">ğŸŒ± Ù‚Ø³Ù… ØªØ·ÙˆÙŠØ± Ø§Ù„Ø°Ø§Øª</h2>
    <p class="lead">ÙƒØªØ¨ ØªØ­ÙÙŠØ²ÙŠØ© ÙˆÙ…Ù‚Ø§Ù„Ø§Øª ØªÙ†Ù…ÙˆÙŠØ© Ù„ØªØ·ÙˆÙŠØ± Ø§Ù„Ø°Ø§Øª</p>
</div>

<div class="container card-section">
    <div class="row g-4">
        {% for book in books %}
        <div class="col-md-4">
            <div class="card h-100 text-center">
                <div class="card-body">
                    <h5 class="card-title">{{ book.title }}</h5>
                    
                    <!-- Ø§Ù„Ù…Ø¤Ù„Ù -->
                    {% if book.author %}
                    <h6 class="card-subtitle mb-3 text-muted">
                        âœï¸ {{ book.author.name }}
                    </h6>
                    {% endif %}
                    
                    <!-- Ø§Ù„ÙˆØµÙ -->
                    <p class="card-text">{{ book.description|truncatewords:30 }}</p>
                    
                    <!-- Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ© -->
                    <div class="book-info mb-3">
                        <small class="text-muted">
                            ğŸ“… {{ book.created_at|date:"Y/m/d" }}
                        </small>
                        
                        {% if book.pdf_file %}
                        <small class="text-muted ms-3">
                            ğŸ“„ PDF
                        </small>
                        {% endif %}
                    </div>
                    
                    <!-- Ø£Ø²Ø±Ø§Ø± Ø§Ù„ØªØ­ÙƒÙ… -->
                    <div class="btn-group" role="group">
                        <!-- Ø²Ø± Ø§Ù„Ù‚Ø±Ø§Ø¡Ø© -->
                        {% if book.pdf_file %}
                        <a href="{{ book.pdf_file.url }}" 
                           class="btn btn-primary" 
                           target="_blank">
                            ğŸ“– Ù‚Ø±Ø§Ø¡Ø©
                        </a>
                        {% else %}
                        <button class="btn btn-secondary" disabled>
                            ğŸ“– ØºÙŠØ± Ù…ØªÙˆÙØ±
                        </button>
                        {% endif %}
                        
                        <!-- Ø²Ø± Ø§Ù„ØªØ­Ù…ÙŠÙ„ -->
                        {% if book.pdf_file %}
                        <a href="{{ book.pdf_file.url }}" 
                           class="btn btn-success"
                           download
                           onclick="confirmDownload('{{ book.title }}')">
                            â¬‡ï¸ ØªØ­Ù…ÙŠÙ„
                        </a>
                        {% else %}
                        <button class="btn btn-secondary" disabled>
                            â¬‡ï¸ ØºÙŠØ± Ù…ØªÙˆÙØ±
                        </button>
                        {% endif %}
                    </div>
                </div>
            </div>
        </div>
        {% empty %}
        <div class="col-12 text-center">
            <div class="alert alert-info">
                <h5>Ù„Ø§ ØªÙˆØ¬Ø¯ ÙƒØªØ¨ ÙÙŠ Ù‡Ø°Ø§ Ø§Ù„Ù‚Ø³Ù… Ø¨Ø¹Ø¯</h5>
                <a href="/admin" class="btn btn-success">â• Ø¥Ø¶Ø§ÙØ© ÙƒØªØ§Ø¨ Ø¬Ø¯ÙŠØ¯</a>
            </div>
        </div>
        {% endfor %}
    </div>
</div>

<script>
// Ø¯Ø§Ù„Ø© ØªØ£ÙƒÙŠØ¯ Ø§Ù„ØªØ­Ù…ÙŠÙ„
function confirmDownload(bookTitle) {
    if (confirm(`Ù‡Ù„ ØªØ±ÙŠØ¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ÙƒØªØ§Ø¨: "${bookTitle}"ØŸ`)) {
        
        console.log(`ØªÙ… ØªØ­Ù…ÙŠÙ„ Ø§Ù„ÙƒØªØ§Ø¨: ${bookTitle}`);
    } else {
        
        event.preventDefault();
        return false;
    }
}

//  ØªØ£Ø«ÙŠØ± Ù„Ù„Ø¨Ø·Ø§Ù‚Ø§Øª
document.addEventListener('DOMContentLoaded', function() {
    const cards = document.querySelectorAll('.card');
    cards.forEach(card => {
        card.addEventListener('mouseenter', function() {
            this.style.transform = 'translateY(-5px)';
            this.style.boxShadow = '0 5px 15px rgba(0,0,0,0.1)';
        });
        
        card.addEventListener('mouseleave', function() {
            this.style.transform = 'translateY(0)';
            this.style.boxShadow = 'none';
        });
    });
});
</script>

<style>
.card {
    transition: transform 0.3s ease, box-shadow 0.3s ease;
    border-radius: 10px;
    border: none;
    box-shadow: 0 2px 5px rgba(0,0,0,0.1);
}

.card:hover {
    box-shadow: 0 5px 15px rgba(0,0,0,0.1);
}

.card-body {
    display: flex;
    flex-direction: column;
}

.card-title {
    min-height: 3rem;
    font-weight: bold;
    color: #2c3e50;
}

.card-text {
    flex-grow: 1;
    min-height: 5rem;
}

.btn-group {
    width: 100%;
}

.btn-group .btn {
    flex: 1;
}

.btn-primary {
    background-color: #f39c12;
    border-color: #f39c12;
}

.btn-success {
    background-color: #e67e22;
    border-color: #e67e22;
}

.hero {
    background: linear-gradient(135deg, #fff9e6 0%, #fff3cd 100%);
    border-radius: 10px;
    margin-bottom: 30px;
}

.book-info {
    font-size: 0.85rem;
}
</style>
{% endblock %}